name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions ğŸš€
on: [push]
jobs:
  Build:
    runs-on: ubuntu-latest
    steps:
      - run: echo 'Running build automation'
      - run: echo "ğŸ§ This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "ğŸ” The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
      - name: Check out repository code
        uses: actions/checkout@v3
      - name: Setup Gradle
        uses: gradle/gradle-build-action@v2
      - name: Execute Gradle build
        run: ./gradlew build
  DeployToStage:
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/master'
    environment: staging
    steps:
      - name: Copy via ssh
        uses: garygrossgarten/github-action-scp@v0.8.0
        with:
          local: src/**
          remote: scp/src
          host: ${{ secrets.HOST }}
          username: ${{ secrets.USERNAME }}
          password: ${{ secrets.ENCRYPTEDPASSPHRASE }}
   